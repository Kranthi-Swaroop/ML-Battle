# MLBattle - System Architecture Diagram

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USER INTERFACE (Browser)                    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Home    â”‚  â”‚Compet-   â”‚  â”‚ Profile  â”‚  â”‚  Login   â”‚       â”‚
â”‚  â”‚  Page    â”‚  â”‚itions    â”‚  â”‚  Page    â”‚  â”‚  Page    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â”‚ HTTP/REST           â”‚ WebSocket            â”‚ JWT Auth
         â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              REACT FRONTEND (localhost:3000)                     â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Services Layer                        â”‚   â”‚
â”‚  â”‚  â€¢ api.js (Axios)  â€¢ websocket.js  â€¢ auth.js           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Custom Hooks                          â”‚   â”‚
â”‚  â”‚  â€¢ useAuth  â€¢ useWebSocket  â€¢ useLeaderboard            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DJANGO BACKEND (localhost:8000)                        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Django REST Framework (HTTP API)                 â”‚   â”‚
â”‚  â”‚  /api/auth/      /api/users/      /api/competitions/   â”‚   â”‚
â”‚  â”‚  /api/leaderboard/   /api/submissions/  /api/ratings/  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Django Channels (WebSocket)                      â”‚   â”‚
â”‚  â”‚  /ws/leaderboard/{competition_id}/                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BACKGROUND PROCESSING                               â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                Celery Worker                             â”‚   â”‚
â”‚  â”‚  â€¢ fetch_kaggle_leaderboard (every 5 min)              â”‚   â”‚
â”‚  â”‚  â€¢ calculate_ratings_after_competition                  â”‚   â”‚
â”‚  â”‚  â€¢ update_competition_statuses (every 10 min)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                Celery Beat (Scheduler)                   â”‚   â”‚
â”‚  â”‚  â€¢ Triggers periodic tasks                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               DATA & EXTERNAL SERVICES                           â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚PostgreSQL  â”‚  â”‚   Redis    â”‚  â”‚ Kaggle API â”‚  â”‚  Admin   â”‚ â”‚
â”‚  â”‚  Database  â”‚  â”‚ Cache &    â”‚  â”‚Integration â”‚  â”‚ Interfaceâ”‚ â”‚
â”‚  â”‚            â”‚  â”‚ Message    â”‚  â”‚            â”‚  â”‚          â”‚ â”‚
â”‚  â”‚  â€¢ Users   â”‚  â”‚ Queue      â”‚  â”‚ â€¢ Fetch    â”‚  â”‚ Django   â”‚ â”‚
â”‚  â”‚  â€¢ Comps   â”‚  â”‚            â”‚  â”‚   Leader-  â”‚  â”‚ Admin    â”‚ â”‚
â”‚  â”‚  â€¢ Subs    â”‚  â”‚ â€¢ Celery   â”‚  â”‚   boards   â”‚  â”‚ Panel    â”‚ â”‚
â”‚  â”‚  â€¢ Leader  â”‚  â”‚ â€¢ Channels â”‚  â”‚ â€¢ Comps    â”‚  â”‚          â”‚ â”‚
â”‚  â”‚  â€¢ Ratings â”‚  â”‚            â”‚  â”‚   Data     â”‚  â”‚          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagrams

### 1. User Registration Flow
```
User (Browser)
    â”‚
    â”œâ”€> Fill registration form
    â”‚
    â”œâ”€> POST /api/users/register/
    â”‚       (username, email, password, kaggle_username)
    â”‚
    â–¼
Django Backend
    â”‚
    â”œâ”€> Validate data
    â”‚
    â”œâ”€> Create User in PostgreSQL
    â”‚
    â”œâ”€> Generate JWT tokens (access + refresh)
    â”‚
    â”œâ”€> Return {user, tokens}
    â”‚
    â–¼
React Frontend
    â”‚
    â”œâ”€> Store tokens in localStorage
    â”‚
    â”œâ”€> Update AuthContext
    â”‚
    â””â”€> Redirect to Home
```

### 2. Competition Registration Flow
```
User (Browser)
    â”‚
    â”œâ”€> Click "Register" on competition
    â”‚
    â”œâ”€> POST /api/competitions/{id}/register/
    â”‚       (Authorization: Bearer {token})
    â”‚
    â–¼
Django Backend
    â”‚
    â”œâ”€> Verify user is authenticated
    â”‚
    â”œâ”€> Check competition status (not completed)
    â”‚
    â”œâ”€> Create LeaderboardEntry
    â”‚       (user, competition, rank=0)
    â”‚
    â”œâ”€> Increment competition.participants_count
    â”‚
    â”œâ”€> Increment user.competitions_participated
    â”‚
    â”œâ”€> Return success message
    â”‚
    â–¼
React Frontend
    â”‚
    â”œâ”€> Show success notification
    â”‚
    â””â”€> Redirect to competition detail
```

### 3. Real-time Leaderboard Update Flow
```
Celery Beat (Scheduler)
    â”‚
    â”œâ”€> Trigger: Every 5 minutes
    â”‚
    â”œâ”€> Execute: fetch_all_active_competitions()
    â”‚
    â–¼
Celery Worker
    â”‚
    â”œâ”€> For each ongoing competition:
    â”‚       â”‚
    â”‚       â”œâ”€> Call KaggleService.get_competition_leaderboard()
    â”‚       â”‚
    â”‚       â”œâ”€> Fetch data from Kaggle API
    â”‚       â”‚
    â”‚       â”œâ”€> Parse leaderboard entries
    â”‚       â”‚
    â”‚       â”œâ”€> Match Kaggle usernames to platform users
    â”‚       â”‚
    â”‚       â”œâ”€> Update LeaderboardEntry in PostgreSQL
    â”‚       â”‚
    â”‚       â”œâ”€> Create Submission records
    â”‚       â”‚
    â”‚       â””â”€> Send WebSocket update
    â”‚               â”‚
    â”‚               â–¼
    â”‚         Django Channels
    â”‚               â”‚
    â”‚               â”œâ”€> Broadcast to group: leaderboard_{comp_id}
    â”‚               â”‚
    â”‚               â–¼
    â”‚         All connected WebSocket clients
    â”‚               â”‚
    â”‚               â–¼
    â”‚         React Frontend
    â”‚               â”‚
    â”‚               â”œâ”€> useLeaderboard hook receives update
    â”‚               â”‚
    â”‚               â”œâ”€> Update component state
    â”‚               â”‚
    â”‚               â””â”€> Re-render leaderboard table
```

### 4. ELO Rating Calculation Flow
```
Competition Ends
    â”‚
    â”œâ”€> update_competition_statuses() task detects end
    â”‚
    â”œâ”€> Trigger: calculate_ratings_after_competition(comp_id)
    â”‚
    â–¼
Celery Worker
    â”‚
    â”œâ”€> Fetch all LeaderboardEntry for competition
    â”‚
    â”œâ”€> Prepare participants list:
    â”‚       [{user_id, username, old_rating, rank}, ...]
    â”‚
    â”œâ”€> Call EloRatingSystem.calculate_competition_ratings()
    â”‚       â”‚
    â”‚       â”œâ”€> Calculate K-factor = logâ‚‚(n) Ã— 8
    â”‚       â”‚
    â”‚       â”œâ”€> Calculate average rating
    â”‚       â”‚
    â”‚       â”œâ”€> For each participant:
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€> Expected = 1/(1+10^((avg-rating)/400))
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€> Actual = 1 - (rank-1)/(n-1)
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€> NewRating = OldRating + KÃ—(Actual-Expected)
    â”‚       â”‚
    â”‚       â””â”€> Return results list
    â”‚
    â”œâ”€> For each result:
    â”‚       â”‚
    â”‚       â”œâ”€> Create RatingHistory record
    â”‚       â”‚
    â”‚       â””â”€> Update User.elo_rating
    â”‚
    â””â”€> Transaction committed to PostgreSQL
```

## Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    React Component                          â”‚
â”‚                                                              â”‚
â”‚  function CompetitionDetail() {                             â”‚
â”‚    const { id } = useParams();                              â”‚
â”‚    const { leaderboard, isConnected } = useLeaderboard(id); â”‚
â”‚    const { user } = useAuth();                              â”‚
â”‚                                                              â”‚
â”‚    return (                                                  â”‚
â”‚      <div>                                                   â”‚
â”‚        <h1>Competition</h1>                                  â”‚
â”‚        {isConnected && <span>â— LIVE</span>}                 â”‚
â”‚        <Leaderboard data={leaderboard} />                   â”‚
â”‚      </div>                                                  â”‚
â”‚    );                                                        â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                          â”‚                   â”‚
         â”‚ useParams()             â”‚ useLeaderboard()  â”‚ useAuth()
         â”‚                          â”‚                   â”‚
         â–¼                          â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚React Router â”‚        â”‚ Custom Hook      â”‚   â”‚ AuthContext â”‚
â”‚             â”‚        â”‚                  â”‚   â”‚             â”‚
â”‚ â€¢ Parse URL â”‚        â”‚ â€¢ Fetch API      â”‚   â”‚ â€¢ User data â”‚
â”‚ â€¢ Get ID    â”‚        â”‚ â€¢ WebSocket      â”‚   â”‚ â€¢ Login     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â€¢ State          â”‚   â”‚ â€¢ Logout    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                     â”‚
                                â–¼                     â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚     Services Layer               â”‚
                       â”‚                                  â”‚
                       â”‚ â€¢ api.js (HTTP)                  â”‚
                       â”‚ â€¢ websocket.js (WebSocket)       â”‚
                       â”‚ â€¢ auth.js (Tokens)               â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚     Django Backend               â”‚
                       â”‚                                  â”‚
                       â”‚ â€¢ REST API                       â”‚
                       â”‚ â€¢ WebSocket                      â”‚
                       â”‚ â€¢ Database                       â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Dependencies

```
Frontend Dependencies:
â”œâ”€â”€ src/index.js
â”‚   â””â”€â”€ imports App.jsx
â”‚       â””â”€â”€ imports AuthProvider (useAuth.js)
â”‚           â””â”€â”€ imports api.js
â”‚               â””â”€â”€ uses axios
â”‚
â”œâ”€â”€ src/App.jsx
â”‚   â”œâ”€â”€ imports Router (react-router-dom)
â”‚   â”œâ”€â”€ imports Navbar
â”‚   â”œâ”€â”€ imports Footer
â”‚   â””â”€â”€ imports Pages
â”‚       â”œâ”€â”€ Home
â”‚       â”œâ”€â”€ CompetitionList
â”‚       â”‚   â””â”€â”€ imports CompetitionCard
â”‚       â”œâ”€â”€ CompetitionDetail
â”‚       â”‚   â”œâ”€â”€ imports useLeaderboard
â”‚       â”‚   â”‚   â”œâ”€â”€ uses api.js
â”‚       â”‚   â”‚   â””â”€â”€ uses websocket.js
â”‚       â”‚   â””â”€â”€ imports Leaderboard
â”‚       â”œâ”€â”€ Profile
â”‚       â”‚   â”œâ”€â”€ imports RatingChart (Chart.js)
â”‚       â”‚   â””â”€â”€ imports SubmissionHistory
â”‚       â”œâ”€â”€ Login
â”‚       â”‚   â””â”€â”€ imports useAuth
â”‚       â””â”€â”€ Register
â”‚           â””â”€â”€ imports useAuth

Backend Dependencies:
â”œâ”€â”€ manage.py
â”‚   â””â”€â”€ uses config.settings
â”‚
â”œâ”€â”€ config/settings/base.py
â”‚   â”œâ”€â”€ defines INSTALLED_APPS
â”‚   â”œâ”€â”€ defines DATABASES
â”‚   â””â”€â”€ defines CHANNEL_LAYERS
â”‚
â”œâ”€â”€ config/celery.py
â”‚   â”œâ”€â”€ imports config.settings
â”‚   â””â”€â”€ defines beat_schedule
â”‚
â”œâ”€â”€ apps/users/models.py
â”‚   â””â”€â”€ defines User (extends AbstractUser)
â”‚
â”œâ”€â”€ apps/competitions/models.py
â”‚   â””â”€â”€ defines Competition
â”‚
â”œâ”€â”€ apps/submissions/models.py
â”‚   â”œâ”€â”€ imports User (FK)
â”‚   â”œâ”€â”€ imports Competition (FK)
â”‚   â””â”€â”€ defines Submission
â”‚
â”œâ”€â”€ apps/leaderboard/models.py
â”‚   â”œâ”€â”€ imports User (FK)
â”‚   â”œâ”€â”€ imports Competition (FK)
â”‚   â””â”€â”€ defines LeaderboardEntry
â”‚
â”œâ”€â”€ apps/ratings/models.py
â”‚   â”œâ”€â”€ imports User (FK)
â”‚   â”œâ”€â”€ imports Competition (FK)
â”‚   â””â”€â”€ defines RatingHistory
â”‚
â””â”€â”€ apps/submissions/tasks.py
    â”œâ”€â”€ imports KaggleService
    â”œâ”€â”€ imports LeaderboardEntry
    â”œâ”€â”€ imports send_leaderboard_update
    â””â”€â”€ defines fetch_kaggle_leaderboard
```

## Technology Stack Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Technology Stack                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  Frontend:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  React 18 â”€â”¬â”€> React Router v6                â”‚      â”‚
â”‚  â”‚            â”œâ”€> Axios (HTTP)                    â”‚      â”‚
â”‚  â”‚            â”œâ”€> Native WebSocket API            â”‚      â”‚
â”‚  â”‚            â””â”€> Chart.js (Visualization)        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                            â”‚
â”‚  Backend:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Django 4.2 â”€â”¬â”€> Django REST Framework         â”‚      â”‚
â”‚  â”‚              â”œâ”€> Django Channels (WebSocket)   â”‚      â”‚
â”‚  â”‚              â”œâ”€> djangorestframework-simplejwt â”‚      â”‚
â”‚  â”‚              â””â”€> django-cors-headers           â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                            â”‚
â”‚  Database & Cache:                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  PostgreSQL 14+ (Primary DB)                   â”‚      â”‚
â”‚  â”‚  Redis 7.x (Cache + Message Broker)            â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                            â”‚
â”‚  Background Processing:                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Celery â”€â”¬â”€> Celery Beat (Scheduler)          â”‚      â”‚
â”‚  â”‚          â”œâ”€> Redis (Broker)                    â”‚      â”‚
â”‚  â”‚          â””â”€> channels-redis (Channel Layer)    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                            â”‚
â”‚  External:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Kaggle API (kaggle-api package)               â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This diagram shows the complete architecture and data flow of the MLBattle platform. All components work together to provide a seamless, real-time ML competition experience! ğŸš€
